<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Add Question</h4>
        </div>
        <div class="modal-body">
            <form>
                <label for="question">Question Name</label>
                <input type="text" name="name" required/>
                
                <label for="topic">Topic</label>
            
                <select name="topic" id="myList" required>  
                    <option>  </option>
                    <% const result = await topicModel.find();
                    res.render('addq',{b:result}); %>
                    
                    <% b.forEach((topic) => { %>
                            <option>  <%= topic.name %> </option>  
                    <% }) %>  
            
                </select>  
            
            
                <label for="link">Link</label> 
                <input type="text" name="link" required/>
                
                <button>SUBMIT</button>
            </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
</div>

<script>
    const form = document.querySelector('form');
    form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        
        //get the values
        const name = form.name.value;
        const topic = form.topic.value;
        const link = form.link.value;

        try{
            const res = await fetch('/addq',{
                method: 'POST',
                body:JSON.stringify({name,topic,link}),
                headers:{'Content-Type':'application/json'}
            });
            location.assign('/');
            
        }catch(err){
            console.log(err);
        }
    });
</script>
